---
phase: 01-foundation-configuration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - app/layout.tsx
  - app/page.tsx
  - app/globals.css
  - next.config.ts
  - tsconfig.json
  - eslint.config.mjs
  - .prettierrc
  - .env.local
  - .env.production
  - .env.example
  - .gitignore
autonomous: true

must_haves:
  truths:
    - 'npm run dev starts Next.js 15 dev server at localhost:3000 without errors'
    - 'npm run build compiles TypeScript successfully with zero errors'
    - 'Tailwind CSS utility classes render visible styles in the browser'
    - 'Environment variables are scoped correctly (NEXT_PUBLIC_ accessible in client, others server-only)'
    - 'ESLint reports no errors on clean codebase; Prettier formats code consistently'
    - 'Git repository excludes .env.local, .next/, node_modules/ from tracking'
  artifacts:
    - path: 'package.json'
      provides: 'Project dependencies and scripts'
      contains: 'next'
    - path: 'app/layout.tsx'
      provides: 'Root layout with metadataBase and font configuration'
      contains: 'metadataBase'
    - path: 'app/page.tsx'
      provides: 'Home page with SSG (no dynamic data fetching)'
    - path: 'app/globals.css'
      provides: 'Tailwind CSS imports'
      contains: 'tailwindcss'
    - path: 'next.config.ts'
      provides: 'Next.js configuration with image patterns and strict TypeScript'
      contains: 'remotePatterns'
    - path: 'eslint.config.mjs'
      provides: 'ESLint with Next.js rules and Prettier integration'
    - path: '.prettierrc'
      provides: 'Prettier formatting configuration'
    - path: '.env.production'
      provides: 'Production environment variable defaults (gitignored, TECH-05)'
      contains: 'NEXT_PUBLIC_SITE_URL'
    - path: '.env.example'
      provides: 'Environment variable template (committed to Git)'
    - path: '.gitignore'
      provides: 'Git exclusion rules for secrets, build artifacts, dependencies'
      contains: '.env*.local'
  key_links:
    - from: 'app/layout.tsx'
      to: 'app/globals.css'
      via: "import './globals.css'"
      pattern: "import.*globals\\.css"
    - from: 'app/globals.css'
      to: 'tailwindcss'
      via: '@import directive'
      pattern: '@import.*tailwindcss'
    - from: 'app/layout.tsx'
      to: 'metadataBase'
      via: 'metadata export'
      pattern: 'metadataBase.*new URL'
---

<objective>
Scaffold the complete Next.js 15 project with App Router, TypeScript, Tailwind CSS, ESLint, Prettier, and all critical configuration to prevent production pitfalls.

Purpose: Establish the entire technical foundation so all subsequent phases can build features on a correctly configured, buildable, deployable project.
Output: A fully configured Next.js 15 project that passes `npm run build`, has proper environment variable scoping, code quality tooling, and Git tracking with correct exclusions.
</objective>

<execution_context>
@C:\Users\Kamal\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\Kamal\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-configuration/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold Next.js 15 project and verify default setup</name>
  <files>
    package.json
    app/layout.tsx
    app/page.tsx
    app/globals.css
    next.config.ts
    tsconfig.json
    .gitignore
  </files>
  <action>
    Run `npx create-next-app@latest reiki-landing --yes` from E:\Oleg to scaffold the project with all recommended defaults (Next.js 15, React 19, TypeScript, Tailwind CSS, ESLint, App Router, Turbopack, src-directory=no, import-alias=@/*).

    IMPORTANT: The project name must be `reiki-landing`. After scaffolding, move all generated files from the `reiki-landing/` subdirectory into the project root `E:\Oleg/` so the project lives at root level (not nested). Remove the empty `reiki-landing/` directory after moving.

    After scaffolding, verify:
    1. Run `npm run dev` briefly (start and kill after confirming "Ready" message) to ensure no startup errors
    2. Run `npm run build` to confirm TypeScript compiles and build succeeds
    3. Check that `.gitignore` includes `.env*.local`, `.next/`, `node_modules/`

    If .gitignore is missing `.env*.local` or `.env.local`, add those entries.

    4. Initialize a Git repository in E:\Oleg (TECH-06 requirement):
       ```bash
       git init
       ```
       This MUST happen here so that Plan 02 can run git commands (add, commit, push) without errors.

    Do NOT modify app/layout.tsx or next.config.ts yet -- that is Task 2.

  </action>
  <verify>
    `npm run build` exits with code 0 and outputs "Compiled successfully" or similar success message.
    `.gitignore` file contains entries for `.env*.local`, `.next/`, `node_modules/`.
    `git rev-parse --is-inside-work-tree` returns `true` (confirms git init succeeded).
  </verify>
  <done>
    Next.js 15 project exists at E:\Oleg with all default files. Build succeeds. Git repository initialized. Git ignores secrets and build artifacts.
  </done>
</task>

<task type="auto">
  <name>Task 2: Apply critical configuration and environment setup</name>
  <files>
    app/layout.tsx
    app/globals.css
    next.config.ts
    .env.local
    .env.production
    .env.example
  </files>
  <action>
    **app/layout.tsx** -- Update the root layout with these critical additions:
    1. Add `metadataBase` to the metadata export. Use dynamic URL detection:
       ```typescript
       metadataBase: new URL(
         process.env.VERCEL_PROJECT_PRODUCTION_URL
           ? `https://${process.env.VERCEL_PROJECT_PRODUCTION_URL}`
           : 'http://localhost:3000'
       ),
       ```
    2. Set title to 'Reiki Practice' with template: '%s | Reiki Practice'
    3. Set description to a brief Reiki practice description
    4. Keep the existing font configuration from create-next-app (Geist font)
    5. Ensure `import './globals.css'` is present (should be from scaffolding)

    **next.config.ts** -- Update configuration:
    1. Add `images.remotePatterns` array with entry for `images.unsplash.com` (for placeholder hero images)
    2. Explicitly set `typescript: { ignoreBuildErrors: false }` to prevent silent TS failures
    3. Keep the rest of the default configuration

    **app/globals.css** -- Verify that Tailwind CSS directives are present. Next.js 15 with Tailwind v4 uses `@import "tailwindcss"` at the top of the file. If using Tailwind v3, it should have `@tailwind base; @tailwind components; @tailwind utilities;`. If neither is present, add the appropriate directive. Do NOT overwrite existing custom CSS -- only ensure the Tailwind import exists.

    **app/page.tsx** -- Replace default content with a minimal landing page placeholder:
    - An h1 with "Reiki Practice" using Tailwind classes (e.g., `text-4xl font-bold`)
    - A paragraph with placeholder text
    - This verifies Tailwind CSS is working AND provides a foundation for Phase 2

    **.env.local** -- Create with development defaults:
    ```
    # Server-only variables (not exposed to browser)
    # DATABASE_URL=postgresql://localhost:5432/mydb

    # Client-accessible variables (exposed to browser via NEXT_PUBLIC_ prefix)
    NEXT_PUBLIC_SITE_URL=http://localhost:3000
    ```

    **.env.production** -- Create with production placeholder values (gitignored, TECH-05 requirement):
    ```
    # Production environment variables
    # These are overridden by Vercel environment settings in actual deployment
    # This file exists locally to satisfy TECH-05 and test production builds

    # Server-only variables
    # DATABASE_URL=

    # Client-accessible variables
    NEXT_PUBLIC_SITE_URL=https://reiki-landing.vercel.app
    ```

    Ensure `.gitignore` includes `.env*.local` AND `.env.production` (or `.env*` pattern that covers both).

    **.env.example** -- Create as a committed template (no actual secrets):
    ```
    # Copy this file to .env.local and fill in values
    # Server-only variables
    # DATABASE_URL=

    # Client-accessible variables
    NEXT_PUBLIC_SITE_URL=http://localhost:3000
    ```

  </action>
  <verify>
    1. `npm run build` succeeds with zero errors (metadataBase configured, TS strict)
    2. `.env.local` exists and is in .gitignore (run `git status` -- .env.local should NOT appear)
    3. `.env.production` exists and is in .gitignore (should NOT appear in `git status`)
    4. `.env.example` exists and IS trackable by git
    5. Verify `app/globals.css` contains Tailwind CSS directives: check for `@import "tailwindcss"` or `@tailwind base; @tailwind components; @tailwind utilities;` (Next.js 15 with Tailwind v4 uses `@import "tailwindcss"`)
    6. Open `http://localhost:3000` after `npm run dev` -- page shows "Reiki Practice" h1 with Tailwind styling (large bold text, not unstyled)
  </verify>
  <done>
    metadataBase prevents build errors for relative metadata URLs. Image remotePatterns ready for external images. Environment variables properly scoped (.env.local, .env.production, .env.example all present per TECH-05). Tailwind CSS directives verified in globals.css. Tailwind rendering confirmed with styled placeholder page. TypeScript strict mode enforced in builds.
  </done>
</task>

<task type="auto">
  <name>Task 3: Configure ESLint with Prettier integration</name>
  <files>
    eslint.config.mjs
    .prettierrc
    package.json
  </files>
  <action>
    **Install Prettier and integration package:**
    ```bash
    npm install -D prettier eslint-config-prettier
    ```

    **eslint.config.mjs** -- Update the existing ESLint config (created by create-next-app) to add Prettier compatibility. The file should:
    1. Keep the existing Next.js ESLint rules (core-web-vitals and/or typescript)
    2. Add `eslint-config-prettier` as the LAST config to disable formatting rules that conflict with Prettier
    3. Do NOT add eslint-plugin-prettier (it slows linting; Prettier should run separately)

    Check the existing eslint.config.mjs first to understand its current structure, then add prettier config at the end of the config array.

    **.prettierrc** -- Create with these settings:
    ```json
    {
      "semi": false,
      "singleQuote": true,
      "trailingComma": "all",
      "tabWidth": 2,
      "printWidth": 100
    }
    ```

    **package.json** -- Add convenience scripts:
    - `"format"`: `"prettier --write ."` (format all files)
    - `"format:check"`: `"prettier --check ."` (CI check without writing)

    After configuration, run:
    1. `npx eslint .` to confirm no ESLint errors
    2. `npm run format:check` to confirm Prettier can check files (may report formatting differences, that's OK)
    3. `npm run format` to auto-format the entire codebase
    4. `npm run build` one final time to confirm nothing broke

  </action>
  <verify>
    1. `npx eslint .` exits with 0 errors (warnings acceptable)
    2. `npm run format:check` exits cleanly after running `npm run format`
    3. `npm run build` still succeeds
    4. `.prettierrc` file exists with configured rules
  </verify>
  <done>
    ESLint catches code quality issues with Next.js-specific rules. Prettier formats code consistently. No conflicts between ESLint formatting rules and Prettier. Build still passes after formatting.
  </done>
</task>

</tasks>

<verification>
Run these commands in sequence to verify the entire plan:

```bash
# 1. Git repository initialized
git rev-parse --is-inside-work-tree
# Expected: true

# 2. TypeScript + Next.js build
npm run build
# Expected: Exit code 0, "Compiled successfully"

# 3. ESLint
npx eslint .
# Expected: Exit code 0, no errors

# 4. Prettier
npm run format:check
# Expected: Exit code 0, all files formatted

# 5. Environment variable scoping
# .env.local and .env.production should NOT appear in git status
git status

# 6. Tailwind CSS directives present
# app/globals.css should contain @import "tailwindcss" or @tailwind directives
grep -E "@import.*tailwindcss|@tailwind" app/globals.css

# 7. Dev server starts
npm run dev &
# Wait for "Ready" message, then kill

# 8. Tailwind CSS renders
# Visit http://localhost:3000 -- "Reiki Practice" should be large bold text
```

</verification>

<success_criteria>

- `npm run build` exits 0 with zero TypeScript errors
- `npx eslint .` reports zero errors
- `npm run format:check` reports zero formatting issues (after format)
- `.env.local` exists but is gitignored
- `.env.production` exists but is gitignored (TECH-05)
- `.env.example` exists and is git-trackable
- Git repository initialized (`git rev-parse --is-inside-work-tree` returns true)
- `http://localhost:3000` shows styled "Reiki Practice" heading (Tailwind working)
- `.gitignore` covers `.env*.local`, `.next/`, `node_modules/`
- `next.config.ts` has `ignoreBuildErrors: false` and `remotePatterns` configured
- `app/layout.tsx` has `metadataBase` configured with dynamic URL detection
  </success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-configuration/01-01-SUMMARY.md`
</output>
